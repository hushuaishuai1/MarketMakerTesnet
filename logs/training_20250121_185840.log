2025-01-21 18:58:42 - INFO - Datos cargados desde ML/data/processed/BTCUSDT_15m_processed.csv, filas: 257756
2025-01-21 18:58:42 - INFO - Columnas de indicadores existentes eliminadas: ['RSI', 'MACD', 'MACDs', 'MACDh', 'OBV', 'BBL', 'BBM', 'BBU', 'SMA_10', 'SMA_50', 'EMA_10', 'EMA_50']
2025-01-21 18:58:43 - INFO - Indicadores técnicos agregados. Filas antes: 257756, después: 257557 (descartadas: 199)
2025-01-21 18:58:43 - INFO - Columnas renombradas: {'RSI_14': 'RSI', 'MACD_12_26_9': 'MACD', 'MACDs_12_26_9': 'MACDs', 'MACDh_12_26_9': 'MACDh', 'BBL_20_2.0': 'BBL', 'BBM_20_2.0': 'BBM', 'BBU_20_2.0': 'BBU', 'STOCHk_14_3_3': 'STOCHk', 'STOCHd_14_3_3': 'STOCHd', 'CCI_14_0.015': 'CCI', 'SMA_10': 'SMA_10', 'SMA_50': 'SMA_50', 'SMA_200': 'SMA_200', 'EMA_10': 'EMA_10', 'EMA_50': 'EMA_50'}
2025-01-21 18:58:43 - INFO - Target binario con look_ahead=3, min_change=0.031
2025-01-21 18:58:43 - INFO - Distribución de clases (0=Vender, 1=Comprar):
target
0.0    986
1.0    871
Name: count, dtype: int64
2025-01-21 18:58:43 - INFO - Muestra de datos con target:
                        close  future_close  change_pct  target
open_time                                                      
2024-08-05 05:15:00  53437.04      51606.13   -0.034263     0.0
2017-12-24 12:45:00  12218.77      12602.83    0.031432     1.0
2017-12-22 06:15:00  13820.00      12759.98   -0.076702     0.0
2021-05-24 18:45:00  37911.79      39353.18    0.038020     1.0
2019-01-10 05:45:00   3989.79       3817.58   -0.043163     0.0
2018-11-28 04:00:00   3933.43       4113.07    0.045670     1.0
2018-01-19 04:15:00  10710.98      11063.25    0.032889     1.0
2022-06-18 06:15:00  20399.69      19498.59   -0.044172     0.0
2018-08-08 16:00:00   6449.51       6249.00   -0.031089     0.0
2017-09-16 10:00:00   3611.41       3480.00   -0.036387     0.0
2025-01-21 18:58:43 - INFO - División de datos en Train/Test completada.
2025-01-21 18:58:43 - INFO - === Búsqueda de hiperparámetros (Optuna) en muestra de Training ===
2025-01-21 18:58:43 - INFO - No se han identificado características categóricas.
2025-01-21 18:58:43 - INFO - Columnas extra eliminadas: ['future_close', 'change_pct']
2025-01-21 18:58:43 - INFO - Dataset preparado: 1002 filas, 21 features (después de imputación).
2025-01-21 18:58:43 - INFO - Iniciando optimización en Optuna (precisión clase=1)...
2025-01-21 18:58:43 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:58:43 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:58:44 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:58:44 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:58:44 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:58:45 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:58:45 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:58:45 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:58:46 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:58:46 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:58:46 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:58:46 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:58:46 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:58:47 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:58:47 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:58:48 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:58:48 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:58:49 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:58:49 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:58:50 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:58:51 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:58:51 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:58:52 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:58:52 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:58:53 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:58:54 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:58:54 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:58:55 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:58:55 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:58:56 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:58:57 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:58:58 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:58:58 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:58:59 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:58:59 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:00 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:59:00 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:59:01 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:01 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:59:01 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:59:02 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:59:02 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:02 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:03 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:59:03 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:59:03 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:04 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:04 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:59:04 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:59:05 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:59:05 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:59:06 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:07 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:59:07 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:07 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:08 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:59:08 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:59:09 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:59:09 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:09 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:10 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:59:10 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:59:11 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:59:11 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:11 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:12 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:59:12 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:59:13 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:13 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:59:14 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:59:14 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:59:15 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:15 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:16 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:59:16 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:59:17 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:18 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:19 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:59:19 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:59:21 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:59:21 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:59:22 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:22 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:24 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:59:24 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:59:25 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:26 - INFO - Balance de clases tras SMOTETomek:
target
0.0    382
1.0    382
Name: count, dtype: int64
2025-01-21 18:59:27 - INFO - Balance de clases tras SMOTETomek:
target
1.0    378
0.0    378
Name: count, dtype: int64
2025-01-21 18:59:27 - INFO - Balance de clases tras SMOTETomek:
target
1.0    390
0.0    390
Name: count, dtype: int64
2025-01-21 18:59:28 - INFO - Balance de clases tras SMOTETomek:
target
1.0    396
0.0    396
Name: count, dtype: int64
2025-01-21 18:59:28 - INFO - Mejor Precisión (clase=1): 0.7389
2025-01-21 18:59:28 - INFO - Mejores parámetros: {'max_depth': 10, 'learning_rate': 0.0836490940915914, 'n_estimators': 354, 'subsample': 0.7768382563742717, 'colsample_bytree': 0.9848937885957385, 'gamma': 0.2043868477491363, 'reg_alpha': 0.9756801214014252, 'reg_lambda': 0.5038460966748217}
2025-01-21 18:59:28 - INFO - === Entrenando Pipeline Final con TODO el Training ===
2025-01-21 18:59:28 - INFO - Columnas extra eliminadas: ['future_close', 'change_pct']
2025-01-21 18:59:28 - INFO - Dataset preparado: 1114 filas, 21 features (después de imputación).
2025-01-21 18:59:28 - INFO - Balance de clases tras SMOTETomek:
target
1.0    554
0.0    554
Name: count, dtype: int64
2025-01-21 18:59:29 - INFO - Pipeline final entrenado con scale_pos_weight=1.00
2025-01-21 18:59:29 - INFO - Pipeline completo guardado en: ./results/XGBoost_Binario_trained_pipeline.joblib
2025-01-21 18:59:29 - INFO - Parámetros guardados en: ./results/XGBoost_Binario_model_params.txt
2025-01-21 18:59:29 - INFO - Lista de features guardada en: ./results/XGBoost_Binario_feature_cols.txt
2025-01-21 18:59:29 - INFO - Columnas de indicadores existentes eliminadas: ['RSI', 'MACD', 'MACDs', 'MACDh', 'OBV', 'BBL', 'BBM', 'BBU', 'STOCHk', 'STOCHd', 'CCI', 'SMA_10', 'SMA_50', 'SMA_200', 'EMA_10', 'EMA_50']
2025-01-21 18:59:29 - INFO - Indicadores técnicos agregados. Filas antes: 743, después: 544 (descartadas: 199)
2025-01-21 18:59:29 - INFO - Columnas renombradas: {'RSI_14': 'RSI', 'MACD_12_26_9': 'MACD', 'MACDs_12_26_9': 'MACDs', 'MACDh_12_26_9': 'MACDh', 'BBL_20_2.0': 'BBL', 'BBM_20_2.0': 'BBM', 'BBU_20_2.0': 'BBU', 'STOCHk_14_3_3': 'STOCHk', 'STOCHd_14_3_3': 'STOCHd', 'CCI_14_0.015': 'CCI', 'SMA_10': 'SMA_10', 'SMA_50': 'SMA_50', 'SMA_200': 'SMA_200', 'EMA_10': 'EMA_10', 'EMA_50': 'EMA_50'}
2025-01-21 18:59:29 - INFO - Target binario con look_ahead=3, min_change=0.031
2025-01-21 18:59:29 - INFO - Distribución de clases (0=Vender, 1=Comprar):
target
1.0    213
0.0    195
Name: count, dtype: int64
2025-01-21 18:59:29 - INFO - Muestra de datos con target:
                        close  future_close  change_pct  target
open_time                                                      
2021-09-13 13:30:00  46299.98      40700.01   -0.120950     0.0
2021-05-26 05:45:00  39229.28      35702.64   -0.089898     0.0
2021-04-23 01:45:00  51048.59      54543.15    0.068456     1.0
2023-08-17 21:00:00  27598.00      26064.83   -0.055554     0.0
2021-03-04 08:30:00  50431.68      58114.36    0.152338     1.0
2020-06-02 14:00:00  10167.98       9557.69   -0.060021     0.0
2023-01-13 23:45:00  19930.01      23318.90    0.170040     1.0
2021-06-27 21:30:00  32642.09      35813.43    0.097155     1.0
2021-02-24 00:15:00  47216.63      50431.68    0.068091     1.0
2020-12-23 12:00:00  22975.93      32785.24    0.426939     1.0
2025-01-21 18:59:29 - INFO - Columnas extra eliminadas: ['change_pct', 'future_close']
2025-01-21 18:59:29 - INFO - Dataset preparado: 408 filas, 21 features (después de imputación).
2025-01-21 18:59:29 - INFO - === Evaluación en Test ===
2025-01-21 18:59:29 - INFO - Matriz de confusión [0=Vender, 1=Comprar]:
[[124  71]
 [116  97]]
2025-01-21 18:59:29 - INFO - Reporte de Clasificación:
              precision    recall  f1-score   support

      Vender       0.52      0.64      0.57       195
     Comprar       0.58      0.46      0.51       213

    accuracy                           0.54       408
   macro avg       0.55      0.55      0.54       408
weighted avg       0.55      0.54      0.54       408

2025-01-21 18:59:29 - INFO - Precision (clase=1): 0.5774
2025-01-21 18:59:29 - INFO - F1 (clase=1): 0.5092
2025-01-21 18:59:29 - INFO - Recall (clase=1): 0.4554
2025-01-21 18:59:29 - INFO - Balanced Accuracy: 0.5456
2025-01-21 18:59:29 - INFO - MCC: 0.0927
2025-01-21 18:59:29 - INFO - AUC: 0.5389
2025-01-21 18:59:31 - INFO - Precisión final en Test (clase=1): 0.5774
2025-01-21 18:59:31 - INFO - Importancia de características guardada en ./results/feature_importances_binary.csv.
2025-01-21 18:59:31 - INFO - Gráfico de importancia de características guardado.
2025-01-21 18:59:32 - INFO - Calculando valores SHAP...
2025-01-21 18:59:33 - INFO - SHAP analysis completado y guardado.
2025-01-21 18:59:33 - INFO - Señales generadas con umbral=0.61
2025-01-21 18:59:33 - INFO - Señales filtradas por tendencia.
2025-01-21 18:59:33 - INFO - Señales guardadas en: ./results/signals_binary.csv
2025-01-21 18:59:33 - INFO - === Proceso Completado con Éxito ===
