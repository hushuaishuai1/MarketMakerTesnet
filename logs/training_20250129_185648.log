2025-01-29 18:56:50 - INFO - Datos cargados desde ML/data/processed/BTCUSDT_15m_processed.csv, filas: 257756
2025-01-29 18:56:50 - INFO - Columnas de indicadores existentes eliminadas: ['RSI', 'MACD', 'MACDs', 'MACDh', 'OBV', 'BBL', 'BBM', 'BBU', 'SMA_10', 'SMA_50', 'EMA_10', 'EMA_50']
2025-01-29 18:56:50 - INFO - Indicadores técnicos agregados. Filas antes: 257756, después: 257557 (descartadas: 199)
2025-01-29 18:56:50 - INFO - Columnas renombradas: {'RSI_14': 'RSI', 'MACD_12_26_9': 'MACD', 'MACDs_12_26_9': 'MACDs', 'MACDh_12_26_9': 'MACDh', 'BBL_20_2.0': 'BBL', 'BBM_20_2.0': 'BBM', 'BBU_20_2.0': 'BBU', 'STOCHk_14_3_3': 'STOCHk', 'STOCHd_14_3_3': 'STOCHd', 'CCI_14_0.015': 'CCI', 'SMA_10': 'SMA_10', 'SMA_50': 'SMA_50', 'SMA_200': 'SMA_200', 'EMA_10': 'EMA_10', 'EMA_50': 'EMA_50'}
2025-01-29 18:56:50 - INFO - Target binario con look_ahead=3, min_change=0.032
2025-01-29 18:56:50 - INFO - Distribución de clases (0=Vender, 1=Comprar):
target
0.0    908
1.0    801
Name: count, dtype: int64
2025-01-29 18:56:50 - INFO - Muestra de datos con target:
                        close  future_close  change_pct  target
open_time                                                      
2018-02-06 01:00:00   6868.80       6446.17   -0.061529     0.0
2018-01-18 06:45:00  11020.00      10541.87   -0.043387     0.0
2020-02-19 21:00:00  10103.75       9615.72   -0.048302     0.0
2017-12-23 15:00:00  14799.99      14218.39   -0.039297     0.0
2018-01-20 04:30:00  11780.00      12443.98    0.056365     1.0
2017-12-07 17:15:00  14630.00      15450.00    0.056049     1.0
2017-12-12 14:30:00  16528.39      15962.84   -0.034217     0.0
2022-06-19 09:45:00  19006.11      19665.98    0.034719     1.0
2017-12-19 14:00:00  17189.94      16575.02   -0.035772     0.0
2018-02-02 12:30:00   8040.00       8799.50    0.094465     1.0
2025-01-29 18:56:50 - INFO - División de datos en Train/Test completada.
2025-01-29 18:56:50 - INFO - === Búsqueda de hiperparámetros (Optuna) en muestra de Training ===
2025-01-29 18:56:50 - INFO - No se han identificado características categóricas.
2025-01-29 18:56:50 - INFO - Columnas extra eliminadas: ['future_close', 'change_pct']
2025-01-29 18:56:50 - INFO - Dataset preparado: 999 filas, 21 features (después de imputación).
2025-01-29 18:56:50 - INFO - Iniciando optimización en Optuna (precisión clase=1)...
2025-01-29 18:56:50 - INFO - Balance de clases tras SMOTETomek:
target
0.0    391
1.0    391
Name: count, dtype: int64
2025-01-29 18:56:50 - INFO - Balance de clases tras SMOTETomek:
target
0.0    389
1.0    389
Name: count, dtype: int64
2025-01-29 18:56:50 - INFO - Balance de clases tras SMOTETomek:
target
0.0    380
1.0    380
Name: count, dtype: int64
2025-01-29 18:56:51 - INFO - Balance de clases tras SMOTETomek:
target
0.0    381
1.0    381
Name: count, dtype: int64
2025-01-29 18:56:51 - INFO - Balance de clases tras SMOTETomek:
target
0.0    385
1.0    385
Name: count, dtype: int64
2025-01-29 18:56:51 - INFO - Balance de clases tras SMOTETomek:
target
0.0    391
1.0    391
Name: count, dtype: int64
2025-01-29 18:56:51 - INFO - Balance de clases tras SMOTETomek:
target
0.0    389
1.0    389
Name: count, dtype: int64
2025-01-29 18:56:51 - INFO - Balance de clases tras SMOTETomek:
target
0.0    380
1.0    380
Name: count, dtype: int64
2025-01-29 18:56:52 - INFO - Balance de clases tras SMOTETomek:
target
0.0    381
1.0    381
Name: count, dtype: int64
2025-01-29 18:56:52 - INFO - Balance de clases tras SMOTETomek:
target
0.0    385
1.0    385
Name: count, dtype: int64
2025-01-29 18:56:52 - INFO - Balance de clases tras SMOTETomek:
target
0.0    391
1.0    391
Name: count, dtype: int64
2025-01-29 18:56:53 - INFO - Balance de clases tras SMOTETomek:
target
0.0    389
1.0    389
Name: count, dtype: int64
2025-01-29 18:56:53 - INFO - Balance de clases tras SMOTETomek:
target
0.0    380
1.0    380
Name: count, dtype: int64
2025-01-29 18:56:54 - INFO - Balance de clases tras SMOTETomek:
target
0.0    381
1.0    381
Name: count, dtype: int64
2025-01-29 18:56:54 - INFO - Balance de clases tras SMOTETomek:
target
0.0    385
1.0    385
Name: count, dtype: int64
2025-01-29 18:56:55 - INFO - Balance de clases tras SMOTETomek:
target
0.0    391
1.0    391
Name: count, dtype: int64
2025-01-29 18:56:55 - INFO - Balance de clases tras SMOTETomek:
target
0.0    389
1.0    389
Name: count, dtype: int64
2025-01-29 18:56:56 - INFO - Balance de clases tras SMOTETomek:
target
0.0    380
1.0    380
Name: count, dtype: int64
2025-01-29 18:56:56 - INFO - Balance de clases tras SMOTETomek:
target
0.0    381
1.0    381
Name: count, dtype: int64
2025-01-29 18:56:57 - INFO - Balance de clases tras SMOTETomek:
target
0.0    385
1.0    385
Name: count, dtype: int64
2025-01-29 18:56:58 - INFO - Balance de clases tras SMOTETomek:
target
0.0    391
1.0    391
Name: count, dtype: int64
2025-01-29 18:56:58 - INFO - Balance de clases tras SMOTETomek:
target
0.0    389
1.0    389
Name: count, dtype: int64
2025-01-29 18:56:58 - INFO - Balance de clases tras SMOTETomek:
target
0.0    380
1.0    380
Name: count, dtype: int64
2025-01-29 18:56:59 - INFO - Balance de clases tras SMOTETomek:
target
0.0    381
1.0    381
Name: count, dtype: int64
2025-01-29 18:56:59 - INFO - Balance de clases tras SMOTETomek:
target
0.0    385
1.0    385
Name: count, dtype: int64
2025-01-29 18:56:59 - INFO - Balance de clases tras SMOTETomek:
target
0.0    391
1.0    391
Name: count, dtype: int64
2025-01-29 18:57:00 - INFO - Balance de clases tras SMOTETomek:
target
0.0    389
1.0    389
Name: count, dtype: int64
2025-01-29 18:57:00 - INFO - Balance de clases tras SMOTETomek:
target
0.0    380
1.0    380
Name: count, dtype: int64
2025-01-29 18:57:01 - INFO - Balance de clases tras SMOTETomek:
target
0.0    381
1.0    381
Name: count, dtype: int64
2025-01-29 18:57:02 - INFO - Balance de clases tras SMOTETomek:
target
0.0    385
1.0    385
Name: count, dtype: int64
2025-01-29 18:57:02 - INFO - Balance de clases tras SMOTETomek:
target
0.0    391
1.0    391
Name: count, dtype: int64
2025-01-29 18:57:03 - INFO - Balance de clases tras SMOTETomek:
target
0.0    389
1.0    389
Name: count, dtype: int64
2025-01-29 18:57:03 - INFO - Balance de clases tras SMOTETomek:
target
0.0    380
1.0    380
Name: count, dtype: int64
2025-01-29 18:57:03 - INFO - Balance de clases tras SMOTETomek:
target
0.0    381
1.0    381
Name: count, dtype: int64
2025-01-29 18:57:04 - INFO - Balance de clases tras SMOTETomek:
target
0.0    385
1.0    385
Name: count, dtype: int64
2025-01-29 18:57:04 - INFO - Balance de clases tras SMOTETomek:
target
0.0    391
1.0    391
Name: count, dtype: int64
2025-01-29 18:57:05 - INFO - Balance de clases tras SMOTETomek:
target
0.0    389
1.0    389
Name: count, dtype: int64
2025-01-29 18:57:06 - INFO - Balance de clases tras SMOTETomek:
target
0.0    380
1.0    380
Name: count, dtype: int64
2025-01-29 18:57:07 - INFO - Balance de clases tras SMOTETomek:
target
0.0    381
1.0    381
Name: count, dtype: int64
2025-01-29 18:57:09 - INFO - Balance de clases tras SMOTETomek:
target
0.0    385
1.0    385
Name: count, dtype: int64
2025-01-29 18:57:10 - INFO - Balance de clases tras SMOTETomek:
target
0.0    391
1.0    391
Name: count, dtype: int64
2025-01-29 18:57:10 - INFO - Balance de clases tras SMOTETomek:
target
0.0    389
1.0    389
Name: count, dtype: int64
2025-01-29 18:57:10 - INFO - Balance de clases tras SMOTETomek:
target
0.0    380
1.0    380
Name: count, dtype: int64
2025-01-29 18:57:10 - INFO - Balance de clases tras SMOTETomek:
target
0.0    381
1.0    381
Name: count, dtype: int64
2025-01-29 18:57:11 - INFO - Balance de clases tras SMOTETomek:
target
0.0    385
1.0    385
Name: count, dtype: int64
2025-01-29 18:57:11 - INFO - Mejor Precisión (clase=1): 0.7224
2025-01-29 18:57:11 - INFO - Mejores parámetros: {'max_depth': 11, 'learning_rate': 0.020107531049695957, 'n_estimators': 671, 'subsample': 0.9510846054797798, 'colsample_bytree': 0.6659133520917333, 'gamma': 0.3377937105460287, 'reg_alpha': 0.09006696587638663, 'reg_lambda': 0.6928383321248949}
2025-01-29 18:57:11 - INFO - === Entrenando Pipeline Final con TODO el Training ===
2025-01-29 18:57:11 - INFO - Columnas extra eliminadas: ['future_close', 'change_pct']
2025-01-29 18:57:11 - INFO - Dataset preparado: 1110 filas, 21 features (después de imputación).
2025-01-29 18:57:11 - INFO - Balance de clases tras SMOTETomek:
target
0.0    558
1.0    558
Name: count, dtype: int64
2025-01-29 18:57:12 - INFO - Pipeline final entrenado con scale_pos_weight=1.00
2025-01-29 18:57:12 - INFO - Pipeline completo guardado en: .ML/results/XGBoost_Binario_trained_pipeline.joblib
2025-01-29 18:57:12 - INFO - Parámetros guardados en: .ML/results/XGBoost_Binario_model_params.txt
2025-01-29 18:57:12 - INFO - Lista de features guardada en: .ML/results/XGBoost_Binario_feature_cols.txt
2025-01-29 18:57:12 - INFO - Columnas de indicadores existentes eliminadas: ['RSI', 'MACD', 'MACDs', 'MACDh', 'OBV', 'BBL', 'BBM', 'BBU', 'STOCHk', 'STOCHd', 'CCI', 'SMA_10', 'SMA_50', 'SMA_200', 'EMA_10', 'EMA_50']
2025-01-29 18:57:12 - INFO - Indicadores técnicos agregados. Filas antes: 599, después: 400 (descartadas: 199)
2025-01-29 18:57:12 - INFO - Columnas renombradas: {'RSI_14': 'RSI', 'MACD_12_26_9': 'MACD', 'MACDs_12_26_9': 'MACDs', 'MACDh_12_26_9': 'MACDh', 'BBL_20_2.0': 'BBL', 'BBM_20_2.0': 'BBM', 'BBU_20_2.0': 'BBU', 'STOCHk_14_3_3': 'STOCHk', 'STOCHd_14_3_3': 'STOCHd', 'CCI_14_0.015': 'CCI', 'SMA_10': 'SMA_10', 'SMA_50': 'SMA_50', 'SMA_200': 'SMA_200', 'EMA_10': 'EMA_10', 'EMA_50': 'EMA_50'}
2025-01-29 18:57:12 - INFO - Target binario con look_ahead=3, min_change=0.032
2025-01-29 18:57:12 - INFO - Distribución de clases (0=Vender, 1=Comprar):
target
0.0    148
1.0    146
Name: count, dtype: int64
2025-01-29 18:57:12 - INFO - Muestra de datos con target:
                        close  future_close  change_pct  target
open_time                                                      
2022-09-13 12:15:00  22713.69      19415.78   -0.145195     0.0
2021-02-08 12:30:00  40370.99      47979.99    0.188477     1.0
2021-05-12 22:45:00  52942.79      50301.61   -0.049887     0.0
2023-08-29 13:30:00  26064.83      27788.60    0.066134     1.0
2022-11-10 13:15:00  16634.84      17303.82    0.040216     1.0
2024-05-03 12:15:00  59166.73      56722.00   -0.041319     0.0
2024-08-05 13:45:00  51951.00      58157.55    0.119469     1.0
2021-05-19 12:15:00  38314.39      32300.46   -0.156963     0.0
2021-01-11 15:15:00  32654.17      30554.58   -0.064298     0.0
2021-01-21 08:15:00  34260.72      32131.74   -0.062141     0.0
2025-01-29 18:57:12 - INFO - Columnas extra eliminadas: ['change_pct', 'future_close']
2025-01-29 18:57:12 - INFO - Dataset preparado: 294 filas, 21 features (después de imputación).
2025-01-29 18:57:12 - INFO - === Evaluación en Test ===
2025-01-29 18:57:12 - INFO - Matriz de confusión [0=Vender, 1=Comprar]:
[[96 52]
 [76 70]]
2025-01-29 18:57:12 - INFO - Reporte de Clasificación:
              precision    recall  f1-score   support

      Vender       0.56      0.65      0.60       148
     Comprar       0.57      0.48      0.52       146

    accuracy                           0.56       294
   macro avg       0.57      0.56      0.56       294
weighted avg       0.57      0.56      0.56       294

2025-01-29 18:57:12 - INFO - Precision (clase=1): 0.5738
2025-01-29 18:57:12 - INFO - F1 (clase=1): 0.5224
2025-01-29 18:57:12 - INFO - Recall (clase=1): 0.4795
2025-01-29 18:57:12 - INFO - Balanced Accuracy: 0.5641
2025-01-29 18:57:12 - INFO - MCC: 0.1300
2025-01-29 18:57:12 - INFO - AUC: 0.5423
2025-01-29 18:57:13 - INFO - Precisión final en Test (clase=1): 0.5738
2025-01-29 18:57:13 - INFO - Importancia de características guardada en .ML/results/feature_importances_binary.csv.
2025-01-29 18:57:13 - INFO - Gráfico de importancia de características guardado.
2025-01-29 18:57:14 - INFO - Calculando valores SHAP...
2025-01-29 18:57:15 - INFO - SHAP analysis completado y guardado.
2025-01-29 18:57:15 - INFO - Señales generadas con umbral=0.51
2025-01-29 18:57:15 - INFO - Señales filtradas por tendencia.
2025-01-29 18:57:15 - INFO - Señales guardadas en: .ML/results/signals_binary.csv
2025-01-29 18:57:15 - INFO - === Proceso Completado con Éxito ===
