2024-12-22 18:47:11 - INFO - Datos cargados correctamente desde ML/data/processed/BTCUSDT_15m_processed.csv, filas: 245845
2024-12-22 18:47:11 - INFO - === Entrenando Modelo con Optuna ===
2024-12-22 18:47:17 - INFO - Variable objetivo generada con look_ahead: 2, lower_percentile: 15, upper_percentile: 85
2024-12-22 18:47:17 - INFO - Umbrales calculados - lower: -0.003711, upper: 0.003850
2024-12-22 18:47:17 - INFO - Variable objetivo generada con look_ahead: 1, lower_percentile: 7, upper_percentile: 87
2024-12-22 18:47:17 - INFO - Distribución de clases:
target
0    137672
1     29501
2     29501
Name: count, dtype: int64
2024-12-22 18:47:17 - INFO - Umbrales calculados - lower: -0.004786, upper: 0.003108
2024-12-22 18:47:17 - INFO - Distribución de clases:
target
0    157339
2     25568
1     13768
Name: count, dtype: int64
2024-12-22 18:47:17 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 18:47:17 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 18:47:17 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 18:47:17 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 18:47:18 - INFO - Columnas eliminadas por correlación > 0.7999999999999999: ['SMA_20', 'STDDEV_20', 'min_20', 'max_20', 'SMA_49', 'STDDEV_49', 'min_49', 'max_49', 'SMA_71', 'STDDEV_71', 'min_71', 'max_71']
2024-12-22 18:47:18 - INFO - Columnas eliminadas por correlación > 0.75: ['ATR_14', 'CCI_14', 'SMA_15', 'STDDEV_15', 'min_15', 'max_15', 'SMA_58', 'STDDEV_58', 'min_58', 'max_58', 'SMA_93', 'STDDEV_93', 'min_93', 'max_93']
2024-12-22 18:53:48 - INFO - Variable objetivo generada con look_ahead: 1, lower_percentile: 7, upper_percentile: 88
2024-12-22 18:53:48 - INFO - Umbrales calculados - lower: -0.004786, upper: 0.003311
2024-12-22 18:53:48 - INFO - Distribución de clases:
target
0    159306
2     23601
1     13768
Name: count, dtype: int64
2024-12-22 18:53:49 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 18:53:49 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 18:53:49 - INFO - Columnas eliminadas por correlación > 0.75: ['ATR_14', 'CCI_14', 'SMA_29', 'STDDEV_29', 'min_29', 'max_29', 'SMA_43', 'STDDEV_43', 'min_43', 'max_43', 'SMA_63', 'STDDEV_63', 'min_63', 'max_63']
2024-12-22 18:59:58 - INFO - Variable objetivo generada con look_ahead: 5, lower_percentile: 12, upper_percentile: 92
2024-12-22 18:59:58 - INFO - Umbrales calculados - lower: -0.007079, upper: 0.010040
2024-12-22 18:59:58 - INFO - Distribución de clases:
target
0    157336
1     23601
2     15734
Name: count, dtype: int64
2024-12-22 18:59:59 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 18:59:59 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 18:59:59 - INFO - Columnas eliminadas por correlación > 0.95: ['SMA_22', 'min_22', 'max_22', 'SMA_53', 'min_53', 'max_53', 'SMA_97', 'min_97', 'max_97']
2024-12-22 19:02:34 - INFO - Variable objetivo generada con look_ahead: 3, lower_percentile: 11, upper_percentile: 89
2024-12-22 19:02:34 - INFO - Umbrales calculados - lower: -0.005884, upper: 0.006085
2024-12-22 19:02:34 - INFO - Distribución de clases:
target
0    153405
1     21634
2     21634
Name: count, dtype: int64
2024-12-22 19:02:35 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 19:02:35 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 19:02:35 - INFO - Columnas eliminadas por correlación > 0.85: ['SMA_14', 'STDDEV_14', 'min_14', 'max_14', 'SMA_35', 'STDDEV_35', 'min_35', 'max_35', 'SMA_67', 'STDDEV_67', 'min_67', 'max_67']
2024-12-22 19:08:00 - INFO - Variable objetivo generada con look_ahead: 1, lower_percentile: 11, upper_percentile: 94
2024-12-22 19:08:00 - INFO - Umbrales calculados - lower: -0.003467, upper: 0.005335
2024-12-22 19:08:00 - INFO - Distribución de clases:
target
0    163239
1     21635
2     11801
Name: count, dtype: int64
2024-12-22 19:08:01 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 19:08:01 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 19:08:02 - INFO - Columnas eliminadas por correlación > 0.75: ['ATR_14', 'CCI_14', 'SMA_21', 'STDDEV_21', 'min_21', 'max_21', 'SMA_57', 'STDDEV_57', 'min_57', 'max_57', 'SMA_85', 'STDDEV_85', 'min_85', 'max_85']
2024-12-22 19:20:56 - INFO - Variable objetivo generada con look_ahead: 1, lower_percentile: 11, upper_percentile: 95
2024-12-22 19:20:56 - INFO - Umbrales calculados - lower: -0.003467, upper: 0.005938
2024-12-22 19:20:56 - INFO - Distribución de clases:
target
0    165206
1     21635
2      9834
Name: count, dtype: int64
2024-12-22 19:20:57 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 19:20:57 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 19:20:57 - INFO - Columnas eliminadas por correlación > 0.7: ['ATR_14', 'CCI_14', 'price_momentum_volatility', 'SMA_15', 'STDDEV_15', 'min_15', 'max_15', 'SMA_32', 'STDDEV_32', 'min_32', 'max_32', 'SMA_78', 'STDDEV_78', 'min_78', 'max_78']
2024-12-22 19:34:17 - INFO - Variable objetivo generada con look_ahead: 3, lower_percentile: 9, upper_percentile: 94
2024-12-22 19:34:17 - INFO - Umbrales calculados - lower: -0.006906, upper: 0.009244
2024-12-22 19:34:17 - INFO - Distribución de clases:
target
0    167171
1     17701
2     11801
Name: count, dtype: int64
2024-12-22 19:34:18 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 19:34:18 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 19:34:18 - INFO - Columnas eliminadas por correlación > 0.7: ['ATR_14', 'CCI_14', 'price_momentum_volatility', 'SMA_11', 'STDDEV_11', 'min_11', 'max_11', 'SMA_52', 'STDDEV_52', 'min_52', 'max_52', 'SMA_85', 'STDDEV_85', 'min_85', 'max_85']
2024-12-22 19:36:06 - INFO - Variable objetivo generada con look_ahead: 4, lower_percentile: 10, upper_percentile: 89
2024-12-22 19:36:06 - INFO - Umbrales calculados - lower: -0.007320, upper: 0.007001
2024-12-22 19:36:06 - INFO - Distribución de clases:
target
0    155370
2     21634
1     19668
Name: count, dtype: int64
2024-12-22 19:36:07 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 19:36:07 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 19:36:08 - INFO - Columnas eliminadas por correlación > 0.95: ['SMA_12', 'min_12', 'max_12', 'SMA_60', 'min_60', 'max_60', 'SMA_86', 'min_86', 'max_86']
2024-12-22 19:39:52 - INFO - Variable objetivo generada con look_ahead: 2, lower_percentile: 8, upper_percentile: 93
2024-12-22 19:39:52 - INFO - Umbrales calculados - lower: -0.006157, upper: 0.006855
2024-12-22 19:39:52 - INFO - Distribución de clases:
target
0    167172
1     15734
2     13768
Name: count, dtype: int64
2024-12-22 19:39:52 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 19:39:52 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 19:39:52 - INFO - Columnas eliminadas por correlación > 0.7: ['ATR_14', 'CCI_14', 'price_momentum_volatility', 'SMA_18', 'STDDEV_18', 'min_18', 'max_18', 'SMA_37', 'STDDEV_37', 'min_37', 'max_37', 'SMA_74', 'STDDEV_74', 'min_74', 'max_74']
2024-12-22 19:43:01 - INFO - Variable objetivo generada con look_ahead: 3, lower_percentile: 6, upper_percentile: 85
2024-12-22 19:43:01 - INFO - Umbrales calculados - lower: -0.009195, upper: 0.004680
2024-12-22 19:43:01 - INFO - Distribución de clases:
target
0    155371
2     29501
1     11801
Name: count, dtype: int64
2024-12-22 19:43:02 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 19:43:02 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 19:43:02 - INFO - Columnas eliminadas por correlación > 0.8999999999999999: ['SMA_17', 'min_17', 'max_17', 'SMA_34', 'min_34', 'max_34', 'SMA_75', 'min_75', 'max_75']
2024-12-22 19:44:49 - INFO - Variable objetivo generada con look_ahead: 4, lower_percentile: 5, upper_percentile: 90
2024-12-22 19:44:49 - INFO - Umbrales calculados - lower: -0.012013, upper: 0.007536
2024-12-22 19:44:49 - INFO - Distribución de clases:
target
0    167170
2     19668
1      9834
Name: count, dtype: int64
2024-12-22 19:44:50 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 19:44:50 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 19:44:50 - INFO - Columnas eliminadas por correlación > 0.85: ['SMA_6', 'min_6', 'max_6', 'SMA_40', 'STDDEV_40', 'min_40', 'max_40', 'SMA_61', 'STDDEV_61', 'min_61', 'max_61']
2024-12-22 19:56:21 - INFO - Variable objetivo generada con look_ahead: 4, lower_percentile: 13, upper_percentile: 90
2024-12-22 19:56:21 - INFO - Umbrales calculados - lower: -0.005885, upper: 0.007536
2024-12-22 19:56:21 - INFO - Distribución de clases:
target
0    151436
1     25568
2     19668
Name: count, dtype: int64
2024-12-22 19:56:21 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 19:56:21 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 19:56:22 - INFO - Columnas eliminadas por correlación > 0.95: ['SMA_10', 'min_10', 'max_10', 'SMA_31', 'min_31', 'max_31', 'SMA_89', 'min_89', 'max_89']
2024-12-22 19:58:13 - INFO - Variable objetivo generada con look_ahead: 4, lower_percentile: 13, upper_percentile: 90
2024-12-22 19:58:13 - INFO - Umbrales calculados - lower: -0.005885, upper: 0.007536
2024-12-22 19:58:13 - INFO - Distribución de clases:
target
0    151436
1     25568
2     19668
Name: count, dtype: int64
2024-12-22 19:58:14 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 19:58:14 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 19:58:15 - INFO - Columnas eliminadas por correlación > 0.95: ['SMA_9', 'min_9', 'max_9', 'SMA_46', 'min_46', 'max_46', 'SMA_88', 'min_88', 'max_88']
2024-12-22 20:03:17 - INFO - Variable objetivo generada con look_ahead: 4, lower_percentile: 10, upper_percentile: 88
2024-12-22 20:03:17 - INFO - Umbrales calculados - lower: -0.007320, upper: 0.006536
2024-12-22 20:03:17 - INFO - Distribución de clases:
target
0    153403
2     23601
1     19668
Name: count, dtype: int64
2024-12-22 20:03:17 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 20:03:17 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 20:03:18 - INFO - Columnas eliminadas por correlación > 0.8999999999999999: ['SMA_11', 'min_11', 'max_11', 'SMA_46', 'min_46', 'max_46', 'SMA_67', 'STDDEV_67', 'min_67', 'max_67']
2024-12-22 20:05:13 - INFO - Variable objetivo generada con look_ahead: 5, lower_percentile: 10, upper_percentile: 88
2024-12-22 20:05:13 - INFO - Umbrales calculados - lower: -0.008249, upper: 0.007342
2024-12-22 20:05:13 - INFO - Distribución de clases:
target
0    153403
2     23601
1     19667
Name: count, dtype: int64
2024-12-22 20:05:14 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 20:05:14 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 20:05:15 - INFO - Columnas eliminadas por correlación > 0.85: ['SMA_13', 'STDDEV_13', 'min_13', 'max_13', 'SMA_60', 'STDDEV_60', 'min_60', 'max_60', 'SMA_68', 'STDDEV_68', 'min_68', 'max_68']
2024-12-22 20:10:00 - INFO - Variable objetivo generada con look_ahead: 5, lower_percentile: 9, upper_percentile: 87
2024-12-22 20:10:00 - INFO - Umbrales calculados - lower: -0.008970, upper: 0.006867
2024-12-22 20:10:00 - INFO - Distribución de clases:
target
0    153402
2     25568
1     17701
Name: count, dtype: int64
2024-12-22 20:10:00 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 20:10:00 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 20:10:01 - INFO - Columnas eliminadas por correlación > 0.85: ['SMA_5', 'min_5', 'max_5', 'SMA_42', 'STDDEV_42', 'min_42', 'max_42', 'SMA_67', 'STDDEV_67', 'min_67', 'max_67']
2024-12-22 20:10:48 - INFO - Variable objetivo generada con look_ahead: 3, lower_percentile: 14, upper_percentile: 87
2024-12-22 20:10:48 - INFO - Umbrales calculados - lower: -0.004796, upper: 0.005313
2024-12-22 20:10:48 - INFO - Distribución de clases:
target
0    143570
1     27535
2     25568
Name: count, dtype: int64
2024-12-22 20:10:48 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 20:10:48 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 20:10:49 - INFO - Columnas eliminadas por correlación > 0.8999999999999999: ['SMA_5', 'min_5', 'max_5', 'SMA_41', 'min_41', 'max_41', 'SMA_67', 'STDDEV_67', 'min_67', 'max_67']
2024-12-22 20:15:57 - INFO - Variable objetivo generada con look_ahead: 3, lower_percentile: 15, upper_percentile: 91
2024-12-22 20:15:57 - INFO - Umbrales calculados - lower: -0.004500, upper: 0.007061
2024-12-22 20:15:57 - INFO - Distribución de clases:
target
0    149471
1     29501
2     17701
Name: count, dtype: int64
2024-12-22 20:15:58 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 20:15:58 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 20:15:59 - INFO - Columnas eliminadas por correlación > 0.8999999999999999: ['SMA_28', 'min_28', 'max_28', 'SMA_37', 'STDDEV_37', 'min_37', 'max_37', 'SMA_66', 'min_66', 'max_66']
2024-12-22 20:23:30 - INFO - Variable objetivo generada con look_ahead: 2, lower_percentile: 13, upper_percentile: 86
2024-12-22 20:23:30 - INFO - Umbrales calculados - lower: -0.004207, upper: 0.004081
2024-12-22 20:23:30 - INFO - Distribución de clases:
target
0    143571
2     27535
1     25568
Name: count, dtype: int64
2024-12-22 20:23:31 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 20:23:31 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 20:23:31 - INFO - Columnas eliminadas por correlación > 0.8999999999999999: ['SMA_8', 'min_8', 'max_8', 'SMA_48', 'min_48', 'max_48', 'SMA_80', 'min_80', 'max_80']
2024-12-22 20:45:42 - INFO - Optuna encontró los mejores parámetros: {'sma_period1': 11, 'sma_period2': 46, 'sma_period3': 67, 'look_ahead': 4, 'lower_percentile': 10, 'upper_percentile': 88, 'corr_threshold': 0.8999999999999999, 'balancing_method': 'ADASYN', 'model__max_depth': 11, 'model__learning_rate': 0.28830592955834733, 'model__n_estimators': 278, 'model__subsample': 0.9035674556228995, 'model__colsample_bytree': 0.8209307527385745, 'model__gamma': 1.5776019138637012e-07, 'model__reg_alpha': 0.016947796155711563, 'model__reg_lambda': 0.023627695110523286}
2024-12-22 20:45:46 - INFO - Variable objetivo generada con look_ahead: 4, lower_percentile: 10, upper_percentile: 88
2024-12-22 20:45:46 - INFO - Umbrales calculados - lower: -0.007320, upper: 0.006536
2024-12-22 20:45:46 - INFO - Distribución de clases:
target
0    153403
2     23601
1     19668
Name: count, dtype: int64
2024-12-22 20:45:46 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 20:45:46 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 20:45:47 - INFO - Columnas eliminadas por correlación > 0.8999999999999999: ['SMA_11', 'min_11', 'max_11', 'SMA_46', 'min_46', 'max_46', 'SMA_67', 'STDDEV_67', 'min_67', 'max_67']
2024-12-22 20:46:54 - INFO - Modelo completo (XGBoost) guardado en: results/XGBoost_trained_pipeline.joblib
2024-12-22 20:46:54 - INFO - Parámetros del modelo XGBoost guardados en: results/XGBoost_model_params.txt
2024-12-22 20:46:54 - INFO - Columnas de características XGBoost guardadas en: results/XGBoost_feature_cols.txt
2024-12-22 20:46:54 - INFO - Columnas eliminadas XGBoost guardadas en: results/XGBoost_drop_cols.txt
2024-12-22 20:46:55 - INFO - Variable objetivo generada con look_ahead: 4, lower_percentile: 10, upper_percentile: 88
2024-12-22 20:46:55 - INFO - Umbrales calculados - lower: -0.004335, upper: 0.004000
2024-12-22 20:46:55 - INFO - Distribución de clases:
target
0    38348
2     5900
1     4917
Name: count, dtype: int64
2024-12-22 20:46:55 - INFO - Eliminados 199 registros con valores faltantes.
2024-12-22 20:46:55 - INFO - Indicadores calculados y filas NaN eliminadas.
2024-12-22 20:46:56 - INFO - Columnas eliminadas por correlación > 0.85: ['SMA_11', 'min_11', 'max_11', 'SMA_46', 'min_46', 'max_46', 'SMA_67', 'STDDEV_67', 'min_67', 'max_67']
2024-12-22 20:46:56 - INFO - === Evaluación del Modelo en Test ===
2024-12-22 20:46:56 - INFO - Matriz de Confusión (clases [2,1,0]):
[[  944  1264  3676]
 [  680  1134  3089]
 [ 3397  4392 30390]]
2024-12-22 20:46:56 - INFO - Reporte de Clasificación:
              precision    recall  f1-score   support

           2       0.19      0.16      0.17      5884
           1       0.17      0.23      0.19      4903
           0       0.82      0.80      0.81     38179

    accuracy                           0.66     48966
   macro avg       0.39      0.40      0.39     48966
weighted avg       0.68      0.66      0.67     48966

2024-12-22 20:46:56 - INFO - F1-score macro en test: 0.3913
2024-12-22 20:46:59 - INFO - === Iniciando Backtest ===
2024-12-22 20:46:59 - ERROR - Error durante la predicción en la fila 0: X has 24 features, but RobustScaler is expecting 14 features as input.
