2025-01-02 21:10:48 - INFO - Datos cargados desde ML/data/processed/BTCUSDT_15m_processed.csv, filas: 251947
2025-01-02 21:10:48 - INFO - Indicadores técnicos agregados al DataFrame. Filas antes: 251947, después: 251898
2025-01-02 21:10:48 - INFO - feature_columns.pkl actualizado con nuevas características.
2025-01-02 21:10:49 - INFO - Target binario mejorado con look_ahead=14, min_change=0.004, max_change=0.06
2025-01-02 21:10:49 - INFO - Distribución de clases (0/1):
target
0    177184
1     72719
Name: count, dtype: int64
2025-01-02 21:10:49 - INFO - División de datos en train y test completada.
2025-01-02 21:10:49 - INFO - === Buscando hiperparámetros (Optuna) en una muestra del training ===
2025-01-02 21:10:49 - INFO - Características cargadas desde: ML/data/processed/feature_columns.pkl
2025-01-02 21:10:49 - INFO - Cantidad de características antes de quitar problemáticas: 33
2025-01-02 21:10:49 - INFO - Cantidad de características después de quitar problemáticas: 33
2025-01-02 21:10:49 - INFO - Se eliminó 'close_time' de las características.
2025-01-02 21:10:49 - INFO - No se han identificado características categóricas.
2025-01-02 21:10:49 - INFO - Tipo de y_train_sample: <class 'pandas.core.series.Series'>
2025-01-02 21:10:49 - INFO - Shape de y_train_sample: (43982,)
2025-01-02 21:10:49 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:10:49 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:10:50 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:10:51 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:10:51 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:10:53 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:10:53 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:10:55 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:10:57 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:10:57 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:10:58 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:10:59 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:11:01 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:11:01 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:11:02 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:11:04 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:11:04 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:11:04 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:11:05 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:11:06 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:11:06 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:11:07 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:11:08 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:11:09 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:11:09 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:11:11 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:11:12 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:11:13 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:11:14 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:11:15 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:11:15 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:11:16 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:11:17 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:11:18 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:11:19 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:11:21 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:11:21 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:11:23 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:11:24 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:11:26 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:11:26 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:11:29 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:11:30 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:11:33 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:11:35 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:11:36 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:11:37 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:11:41 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:11:44 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:11:45 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:11:46 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:11:48 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:11:50 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:11:51 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:11:52 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:11:53 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:11:54 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:11:55 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:11:56 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:11:57 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:11:58 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:11:58 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:12:00 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:12:01 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:12:02 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:12:03 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:12:04 - INFO - Después de SMOTE: target
1    4226
0    4226
Name: count, dtype: int64
2025-01-02 21:12:05 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:12:05 - INFO - Después de SMOTE: target
1    8130
0    8130
Name: count, dtype: int64
2025-01-02 21:12:07 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:12:08 - INFO - Después de SMOTE: target
1    12525
0    12525
Name: count, dtype: int64
2025-01-02 21:12:09 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:12:11 - INFO - Después de SMOTE: target
1    17683
0    17683
Name: count, dtype: int64
2025-01-02 21:12:12 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:12:15 - INFO - Después de SMOTE: target
1    22873
0    22873
Name: count, dtype: int64
2025-01-02 21:12:19 - INFO - Mejor valor de F1: 0.4865
2025-01-02 21:12:19 - INFO - Mejores parámetros: {'max_depth': 4, 'learning_rate': 0.002023200484177403, 'n_estimators': 295, 'subsample': 0.6435302539058474, 'colsample_bytree': 0.7089453877494394, 'gamma': 0.14786514178466156, 'reg_alpha': 0.007718870345661319, 'reg_lambda': 0.02006593135092798}
2025-01-02 21:12:19 - INFO - === Entrenando Pipeline Final con TODO el training ===
2025-01-02 21:12:19 - INFO - Tipo de y_train_full: <class 'pandas.core.series.Series'>
2025-01-02 21:12:19 - INFO - Shape de y_train_full: (199922,)
2025-01-02 21:12:27 - INFO - Después de SMOTE: target
1    139231
0    139231
Name: count, dtype: int64
2025-01-02 21:12:27 - INFO - Balance de clases aplicado mediante SMOTE.
2025-01-02 21:12:34 - INFO - Pipeline final entrenado con todos los datos de entrenamiento (binario).
2025-01-02 21:12:34 - INFO - Modelo guardado en: ./results/XGBoost_Binario_trained_pipeline.joblib
2025-01-02 21:12:34 - INFO - Parámetros guardados en: ./results/XGBoost_Binario_model_params.txt
2025-01-02 21:12:34 - INFO - Lista de features guardada en: ./results/XGBoost_Binario_feature_cols.txt
2025-01-02 21:12:34 - INFO - Indicadores técnicos agregados al DataFrame. Filas antes: 49981, después: 49932
2025-01-02 21:12:34 - INFO - Target binario mejorado con look_ahead=14, min_change=0.004, max_change=0.06
2025-01-02 21:12:34 - INFO - Distribución de clases (0/1):
target
0    37867
1    11988
Name: count, dtype: int64
2025-01-02 21:12:34 - INFO - Tipo de y_test_final: <class 'pandas.core.series.Series'>
2025-01-02 21:12:34 - INFO - Shape de y_test_final: (49855,)
2025-01-02 21:12:34 - INFO - === Evaluación en Test ===
2025-01-02 21:12:35 - INFO - Matriz de confusión [1,0]:
[[ 6639  5349]
 [14425 23442]]
2025-01-02 21:12:35 - INFO - Reporte de Clasificación:
              precision    recall  f1-score   support

           1       0.32      0.55      0.40     11988
           0       0.81      0.62      0.70     37867

    accuracy                           0.60     49855
   macro avg       0.56      0.59      0.55     49855
weighted avg       0.69      0.60      0.63     49855

2025-01-02 21:12:35 - INFO - F1-score: 0.4017
2025-01-02 21:12:35 - INFO - Precisión: 0.3152
2025-01-02 21:12:35 - INFO - Recall: 0.5538
2025-01-02 21:12:35 - INFO - AUC Score: 0.6245
2025-01-02 21:12:37 - INFO - F1 final en Test (Binario): 0.4017
2025-01-02 21:12:37 - INFO - === Analizando importancia de características ===
2025-01-02 21:12:37 - INFO - Tabla de importancia de características guardada en ./results/feature_importances_binario.csv.
2025-01-02 21:12:37 - INFO - Gráfico de importancia de características guardado.
2025-01-02 21:12:37 - INFO - Características seleccionadas por importancia (> 0.02): ['BBB_20_2.0', 'is_weekend', 'day_of_week', 'ATRr_14', 'STOCHd_14_3_3', 'BBP_20_2.0', 'STOCHk_14_3_3', 'hour_of_day', 'OBV', 'close', 'BBL_20_2.0']
2025-01-02 21:12:37 - INFO - feature_columns.pkl actualizado con las características seleccionadas: ['BBB_20_2.0', 'is_weekend', 'day_of_week', 'ATRr_14', 'STOCHd_14_3_3', 'BBP_20_2.0', 'STOCHk_14_3_3', 'hour_of_day', 'OBV', 'close', 'BBL_20_2.0']
2025-01-02 21:12:38 - INFO - Después de SMOTE: target
1    139231
0    139231
Name: count, dtype: int64
2025-01-02 21:12:38 - INFO - Balance de clases aplicado mediante SMOTE después de selección de características.
2025-01-02 21:12:42 - INFO - Pipeline final entrenado con todos los datos de entrenamiento (binario).
2025-01-02 21:12:42 - ERROR - Error en la ejecución principal: The feature names should match those that were passed during fit.
Feature names unseen at fit time:
- BBM_20_2.0
- BBU_20_2.0
- CCI_14_0.015
- EMA_10
- EMA_50
- ...

